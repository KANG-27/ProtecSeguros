---
const images = [
  "https://reclamodeterceros.com/wp-content/uploads/2023/04/Sura-Reclamo-de-Terceros-.webp",
  "https://1000marcas.net/wp-content/uploads/2019/12/Logo-Mapfre-tumb.png",
  "https://serviciospluss.com/wp-content/uploads/2022/01/logo-colpatria.png",
  "https://seeklogo.com/images/A/aseguradora-solidario-de-colombia-logo-0285B0DF5D-seeklogo.com.png",
];
---

<div class="carousel">
  <div class="carousel-inner">
    {
      images.map((image) => (
        <div class="carousel-item">
          <img src={image} alt="Carousel image" />
        </div>
      ))
    }
  </div>
  <div class="carousel-controls">
    <button class="control" onclick="prevSlide()">❮</button>
    <button class="control" onclick="nextSlide()">❯</button>
  </div>
</div>

<script type="text/javascript">
  let currentIndex = 0;

  function getVisibleItems() {
    if (window.innerWidth < 768) {
      return 1; // Pantallas pequeñas: 1 imagen visible
    } else if (window.innerWidth < 1024) {
      return 2; // Pantallas medianas: 2 imágenes visibles
    } else {
      return 3; // Pantallas grandes: 3 imágenes visibles
    }
  }

  function showSlide(index) {
    const slides = document.querySelector(".carousel-inner");
    const totalSlides = slides.children.length;
    visibleItems = getVisibleItems();

    if (index < 0) {
      currentIndex = totalSlides - visibleItems;
    } else if (index >= totalSlides - visibleItems + 1) {
      currentIndex = 0;
    } else {
      currentIndex = index;
    }

    const offset = -currentIndex * (90 / visibleItems);
    slides.style.transform = `translateX(${offset}%)`;
  }

  function nextSlide() {
    showSlide(currentIndex + 1);
  }

  function prevSlide() {
    showSlide(currentIndex - 1);
  }

  window.addEventListener("resize", () => {
    showSlide(currentIndex);
  });

  showSlide(0); // Inicializar el carrusel
</script>

<style>
  .carousel {
    display: flex;
    overflow: hidden;
    width: 100%;
    position: relative;
  }

  .carousel-inner {
    display: flex;
    gap: 20px;
    align-items: center;
    transition: transform 0.5s ease;
  }

  .carousel-item {
    box-sizing: border-box;
    /* border-radius: 10%; */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    height: 100%;
  }

  .carousel img {
    width: 60%;
    height: auto;
  }

  .carousel-controls {
    position: absolute;
    top: 50%;
    width: 100%;
    display: flex;
    justify-content: space-between;
    transform: translateY(-50%);
  }

  .control {
    background: rgba(255, 255, 255, 0.7);
    border: none;
    padding: 10px;
    cursor: pointer;
  }

  @media (max-width: 768px) {
    .carousel-item {
      min-width: 90%; /* Mostrar 1 imagen en pantallas pequeñas */
    }
  }

  @media (min-width: 768px) and (max-width: 1024px) {
    .carousel-item {
      min-width: calc(90% / 2); /* Mostrar 2 imágenes en pantallas medianas */
    }
  }

  @media (min-width: 1024px) {
    .carousel-item {
      min-width: calc(90% / 3); /* Mostrar 3 imágenes en pantallas grandes */
    }
  }
</style>
